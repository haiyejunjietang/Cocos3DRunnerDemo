{"version":3,"sources":["file:///D:/tangjianhua/cocos%20games/MyGame/assets/scripts/Player.ts"],"names":["_decorator","Component","director","Input","input","KeyCode","RigidBody","Vec3","ccclass","property","Player","forwardForce","isLeftDown","isRightDown","start","console","log","getScene","name","on","EventType","KEY_DOWN","onkeydown","KEY_UP","onkeyup","onDestroy","off","event","keyCode","KEY_A","KEY_D","update","dt","rigidBody","applyForce","node","y","emit"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAmCC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAyBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,O,OAAAA,O;AAAeC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;;;;;;;;OAClH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;wBAGjBU,M,WADZF,OAAO,CAAC,QAAD,C,UAEHC,QAAQ,CAACH,SAAD,C,2BAFb,MACaI,MADb,SAC4BT,SAD5B,CACsC;AAAA;AAAA;;AAAA;;AAAA,eAGlCU,YAHkC,GAGX,GAHW;AAAA,eAKlCC,UALkC,GAKZ,KALY;AAAA,eAMlCC,WANkC,GAMX,KANW;AAAA;;AAQxBC,QAAAA,KAAK,GAAS;AACpBC,UAAAA,OAAO,CAACC,GAAR,CAAYd,QAAQ,CAACe,QAAT,GAAoBC,IAAhC;AACAd,UAAAA,KAAK,CAACe,EAAN,CAAShB,KAAK,CAACiB,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACAlB,UAAAA,KAAK,CAACe,EAAN,CAAShB,KAAK,CAACiB,SAAN,CAAgBG,MAAzB,EAAiC,KAAKC,OAAtC,EAA+C,IAA/C;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxBrB,UAAAA,KAAK,CAACsB,GAAN,CAAUvB,KAAK,CAACiB,SAAN,CAAgBC,QAA1B,EAAoC,KAAKC,SAAzC,EAAoD,IAApD;AACAlB,UAAAA,KAAK,CAACsB,GAAN,CAAUvB,KAAK,CAACiB,SAAN,CAAgBG,MAA1B,EAAkC,KAAKC,OAAvC,EAAgD,IAAhD;AACH;;AACDF,QAAAA,SAAS,CAACK,KAAD,EAAuB;AAC5B,kBAAQA,KAAK,CAACC,OAAd;AACI,iBAAKvB,OAAO,CAACwB,KAAb;AACI,mBAAKjB,UAAL,GAAkB,IAAlB;AACA;;AACJ,iBAAKP,OAAO,CAACyB,KAAb;AACI,mBAAKjB,WAAL,GAAmB,IAAnB;AACA;AANR;AAQH;;AACDW,QAAAA,OAAO,CAACG,KAAD,EAAuB;AAC1B,kBAAQA,KAAK,CAACC,OAAd;AACI,iBAAKvB,OAAO,CAACwB,KAAb;AACI,mBAAKjB,UAAL,GAAkB,KAAlB;AACA;;AACJ,iBAAKP,OAAO,CAACyB,KAAb;AACI,mBAAKjB,WAAL,GAAmB,KAAnB;AACA;AANR;AAQH;;AACSkB,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,eAAKC,SAAL,CAAeC,UAAf,CAA0B,IAAI3B,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,KAAKI,YAAL,GAAoBqB,EAAnC,CAA1B;;AACA,cAAI,KAAKpB,UAAT,EAAqB;AACjB,iBAAKqB,SAAL,CAAeC,UAAf,CAA0B,IAAI3B,IAAJ,CAAS,KAAKI,YAAL,GAAoBqB,EAApB,GAAyB,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,CAA1B;AACH;;AACD,cAAI,KAAKnB,WAAT,EAAsB;AAClB,iBAAKoB,SAAL,CAAeC,UAAf,CAA0B,IAAI3B,IAAJ,CAAS,CAAC,KAAKI,YAAN,GAAqBqB,EAArB,GAA0B,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,CAA1B;AACH;;AACD,cAAG,KAAKG,IAAL,CAAUC,CAAV,GAAc,CAAC,EAAlB,EAAqB;AACjBlC,YAAAA,QAAQ,CAACe,QAAT,GAAoBoB,IAApB,CAAyB,OAAzB;AACH;AACJ;;AAhDiC,O;;;;;iBAEX,I","sourcesContent":["import { _decorator, BoxCollider, Collider, Component, director, EventKeyboard, Input, input, KeyCode, Node, RigidBody, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Player')\r\nexport class Player extends Component {\r\n    @property(RigidBody)\r\n    rigidBody: RigidBody = null;\r\n    forwardForce: number = 500;\r\n\r\n    isLeftDown: boolean = false;\r\n    isRightDown: boolean = false;\r\n\r\n    protected start(): void {\r\n        console.log(director.getScene().name)\r\n        input.on(Input.EventType.KEY_DOWN, this.onkeydown, this);\r\n        input.on(Input.EventType.KEY_UP, this.onkeyup, this);\r\n    }\r\n    protected onDestroy(): void {\r\n        input.off(Input.EventType.KEY_DOWN, this.onkeydown, this);\r\n        input.off(Input.EventType.KEY_UP, this.onkeyup, this);\r\n    }\r\n    onkeydown(event: EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this.isLeftDown = true;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.isRightDown = true;\r\n                break;\r\n        }\r\n    }\r\n    onkeyup(event: EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this.isLeftDown = false;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.isRightDown = false;\r\n                break;\r\n        }\r\n    }\r\n    protected update(dt: number): void {\r\n        this.rigidBody.applyForce(new Vec3(0, 0, this.forwardForce * dt));\r\n        if (this.isLeftDown) {\r\n            this.rigidBody.applyForce(new Vec3(this.forwardForce * dt * 2, 0, 0))\r\n        }\r\n        if (this.isRightDown) {\r\n            this.rigidBody.applyForce(new Vec3(-this.forwardForce * dt * 2, 0, 0))\r\n        }\r\n        if(this.node.y < -10){\r\n            director.getScene().emit('faild');\r\n        }\r\n    }\r\n}\r\n\r\n"]}